import { useState } from "react";
import { Box, Button, Typography, Menu, MenuItem } from "@mui/material";

function Header() {
  // State for controlling dropdowns
  const [anchorElProduct, setAnchorElProduct] = useState(null);
  const [anchorElBlog, setAnchorElBlog] = useState(null);
  const [anchorElResources, setAnchorElResources] = useState(null);

  // Handlers for opening and closing dropdowns
  const handleProductClick = (event) => {
    setAnchorElProduct(event.currentTarget);
  };
  const handleBlogClick = (event) => {
    setAnchorElBlog(event.currentTarget);
  };
  const handleResourcesClick = (event) => {
    setAnchorElResources(event.currentTarget);
  };

  const handleClose = () => {
    setAnchorElProduct(null);
    setAnchorElBlog(null);
    setAnchorElResources(null);
  };

  return (
    <Box
      sx={{
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        padding: "10px 20px",
        backgroundColor: "#333", // Dark background
        borderRadius: "24px",
        color: "#fff", // White text color
        maxWidth: "40vw",
        margin: "auto",
      }}
    >
      {/* Logo */}
      <Box
        sx={{
          width: "40px",
          height: "40px",
          backgroundColor: "#4B6AFF", // Blue background for the logo
          borderRadius: "8px",
        }}
      />

      {/* Navigation Links */}
      <Box
        sx={{
          display: "flex",
          alignItems: "center",
          gap: 4,
        }}
      >
        {/* Product Dropdown */}
        <Typography
          variant="body1"
          sx={{
            cursor: "pointer",
            display: "flex",
            alignItems: "center",
            gap: 1,
          }}
          onClick={handleProductClick}
        >
          Product
          <svg
            width="9"
            height="6"
            viewBox="0 0 9 6"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M4.80797 5.38721L0.667974 1.24721L1.54097 0.374207L4.80797 3.64121L8.07597 0.374207L8.94897 1.24721L4.80797 5.38721Z"
              fill="white"
              fillOpacity="0.6"
            />
          </svg>
        </Typography>
        <Menu
          anchorEl={anchorElProduct}
          open={Boolean(anchorElProduct)}
          onClose={handleClose}
        >
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            <Box
              display="flex"
              justifyContent="space-between"
              alignItems="center"
            >
              <svg
                style={{ paddingRight: "10px" }}
                width="16"
                height="17"
                viewBox="0 0 16 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.5 2.96387H3.5C3.23478 2.96387 2.98043 3.06922 2.79289 3.25676C2.60536 3.4443 2.5 3.69865 2.5 3.96387V6.96387C2.5 7.22908 2.60536 7.48344 2.79289 7.67097C2.98043 7.85851 3.23478 7.96387 3.5 7.96387H6.5C6.76522 7.96387 7.01957 7.85851 7.20711 7.67097C7.39464 7.48344 7.5 7.22908 7.5 6.96387V3.96387C7.5 3.69865 7.39464 3.4443 7.20711 3.25676C7.01957 3.06922 6.76522 2.96387 6.5 2.96387ZM6.5 6.96387H3.5V3.96387H6.5V6.96387ZM12.5 2.96387H9.5C9.23478 2.96387 8.98043 3.06922 8.79289 3.25676C8.60536 3.4443 8.5 3.69865 8.5 3.96387V6.96387C8.5 7.22908 8.60536 7.48344 8.79289 7.67097C8.98043 7.85851 9.23478 7.96387 9.5 7.96387H12.5C12.7652 7.96387 13.0196 7.85851 13.2071 7.67097C13.3946 7.48344 13.5 7.22908 13.5 6.96387V3.96387C13.5 3.69865 13.3946 3.4443 13.2071 3.25676C13.0196 3.06922 12.7652 2.96387 12.5 2.96387ZM12.5 6.96387H9.5V3.96387H12.5V6.96387ZM6.5 8.96387H3.5C3.23478 8.96387 2.98043 9.06922 2.79289 9.25676C2.60536 9.4443 2.5 9.69865 2.5 9.96387V12.9639C2.5 13.2291 2.60536 13.4834 2.79289 13.671C2.98043 13.8585 3.23478 13.9639 3.5 13.9639H6.5C6.76522 13.9639 7.01957 13.8585 7.20711 13.671C7.39464 13.4834 7.5 13.2291 7.5 12.9639V9.96387C7.5 9.69865 7.39464 9.4443 7.20711 9.25676C7.01957 9.06922 6.76522 8.96387 6.5 8.96387ZM6.5 12.9639H3.5V9.96387H6.5V12.9639ZM12.5 8.96387H9.5C9.23478 8.96387 8.98043 9.06922 8.79289 9.25676C8.60536 9.4443 8.5 9.69865 8.5 9.96387V12.9639C8.5 13.2291 8.60536 13.4834 8.79289 13.671C8.98043 13.8585 9.23478 13.9639 9.5 13.9639H12.5C12.7652 13.9639 13.0196 13.8585 13.2071 13.671C13.3946 13.4834 13.5 13.2291 13.5 12.9639V9.96387C13.5 9.69865 13.3946 9.4443 13.2071 9.25676C13.0196 9.06922 12.7652 8.96387 12.5 8.96387ZM12.5 12.9639H9.5V9.96387H12.5V12.9639Z"
                  fill="#ABABAB"
                />
              </svg>
              App Builder
            </Box>
          </MenuItem>
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            <Box
              display="flex"
              justifyContent="space-between"
              alignItems="center"
            >
              <svg
                style={{ paddingRight: "10px" }}
                width="16"
                height="17"
                viewBox="0 0 16 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M10 7.46387H13C13.2652 7.46387 13.5196 7.35851 13.7071 7.17097C13.8946 6.98344 14 6.72908 14 6.46387V3.46387C14 3.19865 13.8946 2.9443 13.7071 2.75676C13.5196 2.56922 13.2652 2.46387 13 2.46387H10C9.73478 2.46387 9.48043 2.56922 9.29289 2.75676C9.10536 2.9443 9 3.19865 9 3.46387V4.46387H8C7.60218 4.46387 7.22064 4.6219 6.93934 4.90321C6.65804 5.18451 6.5 5.56604 6.5 5.96387V7.96387H4.5V7.46387C4.5 7.19865 4.39464 6.9443 4.20711 6.75676C4.01957 6.56922 3.76522 6.46387 3.5 6.46387H1.5C1.23478 6.46387 0.98043 6.56922 0.792893 6.75676C0.605357 6.9443 0.5 7.19865 0.5 7.46387V9.46387C0.5 9.72908 0.605357 9.98344 0.792893 10.171C0.98043 10.3585 1.23478 10.4639 1.5 10.4639H3.5C3.76522 10.4639 4.01957 10.3585 4.20711 10.171C4.39464 9.98344 4.5 9.72908 4.5 9.46387V8.96387H6.5V10.9639C6.5 11.3617 6.65804 11.7432 6.93934 12.0245C7.22064 12.3058 7.60218 12.4639 8 12.4639H9V13.4639C9 13.7291 9.10536 13.9834 9.29289 14.171C9.48043 14.3585 9.73478 14.4639 10 14.4639H13C13.2652 14.4639 13.5196 14.3585 13.7071 14.171C13.8946 13.9834 14 13.7291 14 13.4639V10.4639C14 10.1987 13.8946 9.9443 13.7071 9.75676C13.5196 9.56922 13.2652 9.46387 13 9.46387H10C9.73478 9.46387 9.48043 9.56922 9.29289 9.75676C9.10536 9.9443 9 10.1987 9 10.4639V11.4639H8C7.86739 11.4639 7.74021 11.4112 7.64645 11.3174C7.55268 11.2237 7.5 11.0965 7.5 10.9639V5.96387C7.5 5.83126 7.55268 5.70408 7.64645 5.61031C7.74021 5.51655 7.86739 5.46387 8 5.46387H9V6.46387C9 6.72908 9.10536 6.98344 9.29289 7.17097C9.48043 7.35851 9.73478 7.46387 10 7.46387ZM3.5 9.46387H1.5V7.46387H3.5V9.46387ZM10 10.4639H13V13.4639H10V10.4639ZM10 3.46387H13V6.46387H10V3.46387Z"
                  fill="#ABABAB"
                />
              </svg>
              Workflows
            </Box>
          </MenuItem>
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            <Box
              display="flex"
              justifyContent="space-between"
              alignItems="center"
            >
              <svg
                style={{ paddingRight: "10px" }}
                width="16"
                height="17"
                viewBox="0 0 16 17"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M8 2.46387C4.63562 2.46387 2 4.00137 2 5.96387V11.9639C2 13.9264 4.63562 15.4639 8 15.4639C11.3644 15.4639 14 13.9264 14 11.9639V5.96387C14 4.00137 11.3644 2.46387 8 2.46387ZM13 8.96387C13 9.56512 12.5075 10.1782 11.6494 10.6464C10.6831 11.1732 9.38688 11.4639 8 11.4639C6.61312 11.4639 5.31687 11.1732 4.35063 10.6464C3.4925 10.1782 3 9.56512 3 8.96387V7.92387C4.06625 8.86137 5.88937 9.46387 8 9.46387C10.1106 9.46387 11.9338 8.85887 13 7.92387V8.96387ZM4.35063 4.28137C5.31687 3.75449 6.61312 3.46387 8 3.46387C9.38688 3.46387 10.6831 3.75449 11.6494 4.28137C12.5075 4.74949 13 5.36262 13 5.96387C13 6.56512 12.5075 7.17824 11.6494 7.64637C10.6831 8.17324 9.38688 8.46387 8 8.46387C6.61312 8.46387 5.31687 8.17324 4.35063 7.64637C3.4925 7.17824 3 6.56512 3 5.96387C3 5.36262 3.4925 4.74949 4.35063 4.28137ZM11.6494 13.6464C10.6831 14.1732 9.38688 14.4639 8 14.4639C6.61312 14.4639 5.31687 14.1732 4.35063 13.6464C3.4925 13.1782 3 12.5651 3 11.9639V10.9239C4.06625 11.8614 5.88937 12.4639 8 12.4639C10.1106 12.4639 11.9338 11.8589 13 10.9239V11.9639C13 12.5651 12.5075 13.1782 11.6494 13.6464Z"
                  fill="#ABABAB"
                />
              </svg>
              Database
            </Box>
          </MenuItem>
        </Menu>

        <Typography variant="body1" sx={{ cursor: "pointer" }}>
          Pricing
        </Typography>
        <Typography
          variant="body1"
          sx={{
            cursor: "pointer",
            display: "flex",
            alignItems: "center",
            gap: 1,
          }}
          onClick={handleBlogClick}
        >
          Blog
          <svg
            width="9"
            height="6"
            viewBox="0 0 9 6"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M4.80797 5.38721L0.667974 1.24721L1.54097 0.374207L4.80797 3.64121L8.07597 0.374207L8.94897 1.24721L4.80797 5.38721Z"
              fill="white"
              fillOpacity="0.6"
            />
          </svg>
        </Typography>
        <Menu
          anchorEl={anchorElBlog}
          open={Boolean(anchorElBlog)}
          onClose={handleClose}
        >
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            Post 1
          </MenuItem>
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            Post 2
          </MenuItem>
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            Post 3
          </MenuItem>
        </Menu>

        <Typography
          variant="body1"
          sx={{
            cursor: "pointer",
            display: "flex",
            alignItems: "center",
            gap: 1,
          }}
          onClick={handleResourcesClick}
        >
          Resources
          <svg
            width="9"
            height="6"
            viewBox="0 0 9 6"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M4.80797 5.38721L0.667974 1.24721L1.54097 0.374207L4.80797 3.64121L8.07597 0.374207L8.94897 1.24721L4.80797 5.38721Z"
              fill="white"
              fillOpacity="0.6"
            />
          </svg>
        </Typography>
        <Menu
          anchorEl={anchorElResources}
          open={Boolean(anchorElResources)}
          onClose={handleClose}
        >
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            <Box
              display="flex"
              justifyContent="space-between"
              alignItems="center"
            >
              <svg
                style={{ paddingRight: "10px" }}
                width="12"
                height="12"
                viewBox="0 0 12 12"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4.5 0.463867H1.5C1.23478 0.463867 0.98043 0.569224 0.792893 0.75676C0.605357 0.944297 0.5 1.19865 0.5 1.46387V4.46387C0.5 4.72908 0.605357 4.98344 0.792893 5.17097C0.98043 5.35851 1.23478 5.46387 1.5 5.46387H4.5C4.76522 5.46387 5.01957 5.35851 5.20711 5.17097C5.39464 4.98344 5.5 4.72908 5.5 4.46387V1.46387C5.5 1.19865 5.39464 0.944297 5.20711 0.75676C5.01957 0.569224 4.76522 0.463867 4.5 0.463867ZM4.5 4.46387H1.5V1.46387H4.5V4.46387ZM10.5 0.463867H7.5C7.23478 0.463867 6.98043 0.569224 6.79289 0.75676C6.60536 0.944297 6.5 1.19865 6.5 1.46387V4.46387C6.5 4.72908 6.60536 4.98344 6.79289 5.17097C6.98043 5.35851 7.23478 5.46387 7.5 5.46387H10.5C10.7652 5.46387 11.0196 5.35851 11.2071 5.17097C11.3946 4.98344 11.5 4.72908 11.5 4.46387V1.46387C11.5 1.19865 11.3946 0.944297 11.2071 0.75676C11.0196 0.569224 10.7652 0.463867 10.5 0.463867ZM10.5 4.46387H7.5V1.46387H10.5V4.46387ZM4.5 6.46387H1.5C1.23478 6.46387 0.98043 6.56922 0.792893 6.75676C0.605357 6.9443 0.5 7.19865 0.5 7.46387V10.4639C0.5 10.7291 0.605357 10.9834 0.792893 11.171C0.98043 11.3585 1.23478 11.4639 1.5 11.4639H4.5C4.76522 11.4639 5.01957 11.3585 5.20711 11.171C5.39464 10.9834 5.5 10.7291 5.5 10.4639V7.46387C5.5 7.19865 5.39464 6.9443 5.20711 6.75676C5.01957 6.56922 4.76522 6.46387 4.5 6.46387ZM4.5 10.4639H1.5V7.46387H4.5V10.4639ZM10.5 6.46387H7.5C7.23478 6.46387 6.98043 6.56922 6.79289 6.75676C6.60536 6.9443 6.5 7.19865 6.5 7.46387V10.4639C6.5 10.7291 6.60536 10.9834 6.79289 11.171C6.98043 11.3585 7.23478 11.4639 7.5 11.4639H10.5C10.7652 11.4639 11.0196 11.3585 11.2071 11.171C11.3946 10.9834 11.5 10.7291 11.5 10.4639V7.46387C11.5 7.19865 11.3946 6.9443 11.2071 6.75676C11.0196 6.56922 10.7652 6.46387 10.5 6.46387ZM10.5 10.4639H7.5V7.46387H10.5V10.4639Z"
                  fill="#ABABAB"
                />
              </svg>
              Template
            </Box>
          </MenuItem>
          <MenuItem
            onClick={handleClose}
            style={{ backgroundColor: "#333", color: "#ffff" }}
          >
            <Box
              display="flex"
              justifyContent="space-between"
              alignItems="center"
            >
              <svg
                style={{ paddingRight: "10px" }}
                width="12"
                height="15"
                viewBox="0 0 12 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M8.5 7.96387C8.5 8.09648 8.44732 8.22365 8.35355 8.31742C8.25979 8.41119 8.13261 8.46387 8 8.46387H4C3.86739 8.46387 3.74021 8.41119 3.64645 8.31742C3.55268 8.22365 3.5 8.09648 3.5 7.96387C3.5 7.83126 3.55268 7.70408 3.64645 7.61031C3.74021 7.51655 3.86739 7.46387 4 7.46387H8C8.13261 7.46387 8.25979 7.51655 8.35355 7.61031C8.44732 7.70408 8.5 7.83126 8.5 7.96387ZM8 9.46387H4C3.86739 9.46387 3.74021 9.51655 3.64645 9.61031C3.55268 9.70408 3.5 9.83126 3.5 9.96387C3.5 10.0965 3.55268 10.2237 3.64645 10.3174C3.74021 10.4112 3.86739 10.4639 4 10.4639H8C8.13261 10.4639 8.25979 10.4112 8.35355 10.3174C8.44732 10.2237 8.5 10.0965 8.5 9.96387C8.5 9.83126 8.44732 9.70408 8.35355 9.61031C8.25979 9.51655 8.13261 9.46387 8 9.46387ZM11.5 2.46387V12.4639C11.5 12.9943 11.2893 13.503 10.9142 13.8781C10.5391 14.2532 10.0304 14.4639 9.5 14.4639H2.5C1.96957 14.4639 1.46086 14.2532 1.08579 13.8781C0.710714 13.503 0.5 12.9943 0.5 12.4639V2.46387C0.5 2.33126 0.552679 2.20408 0.646447 2.11031C0.740215 2.01655 0.867392 1.96387 1 1.96387H2.5V1.46387C2.5 1.33126 2.55268 1.20408 2.64645 1.11031C2.74021 1.01655 2.86739 0.963867 3 0.963867C3.13261 0.963867 3.25979 1.01655 3.35355 1.11031C3.44732 1.20408 3.5 1.33126 3.5 1.46387V1.96387H5.5V1.46387C5.5 1.33126 5.55268 1.20408 5.64645 1.11031C5.74021 1.01655 5.86739 0.963867 6 0.963867C6.13261 0.963867 6.25979 1.01655 6.35355 1.11031C6.44732 1.20408 6.5 1.33126 6.5 1.46387V1.96387H8.5V1.46387C8.5 1.33126 8.55268 1.20408 8.64645 1.11031C8.74021 1.01655 8.86739 0.963867 9 0.963867C9.13261 0.963867 9.25979 1.01655 9.35355 1.11031C9.44732 1.20408 9.5 1.33126 9.5 1.46387V1.96387H11C11.1326 1.96387 11.2598 2.01655 11.3536 2.11031C11.4473 2.20408 11.5 2.33126 11.5 2.46387ZM10.5 2.96387H9.5V3.46387C9.5 3.59648 9.44732 3.72365 9.35355 3.81742C9.25979 3.91119 9.13261 3.96387 9 3.96387C8.86739 3.96387 8.74021 3.91119 8.64645 3.81742C8.55268 3.72365 8.5 3.59648 8.5 3.46387V2.96387H6.5V3.46387C6.5 3.59648 6.44732 3.72365 6.35355 3.81742C6.25979 3.91119 6.13261 3.96387 6 3.96387C5.86739 3.96387 5.74021 3.91119 5.64645 3.81742C5.55268 3.72365 5.5 3.59648 5.5 3.46387V2.96387H3.5V3.46387C3.5 3.59648 3.44732 3.72365 3.35355 3.81742C3.25979 3.91119 3.13261 3.96387 3 3.96387C2.86739 3.96387 2.74021 3.91119 2.64645 3.81742C2.55268 3.72365 2.5 3.59648 2.5 3.46387V2.96387H1.5V12.4639C1.5 12.7291 1.60536 12.9834 1.79289 13.171C1.98043 13.3585 2.23478 13.4639 2.5 13.4639H9.5C9.76522 13.4639 10.0196 13.3585 10.2071 13.171C10.3946 12.9834 10.5 12.7291 10.5 12.4639V2.96387Z"
                  fill="#ABABAB"
                />
              </svg>
              Blogs
            </Box>
          </MenuItem>
        </Menu>

        <Typography variant="body1" sx={{ cursor: "pointer" }}>
          Download
        </Typography>
        <Typography variant="body1" sx={{ cursor: "pointer" }}>
          Sign in
        </Typography>
      </Box>

      {/* Call-to-Action Button */}
      <Button
        variant="contained"
        sx={{
          backgroundColor: "#fff",
          color: "#333",
          fontWeight: "bold",
          borderRadius: "20px",
          padding: "8px 20px",
          "&:hover": {
            backgroundColor: "#f0f0f0",
          },
        }}
      >
        Start for free
      </Button>
    </Box>
  );
}

export default Header;
